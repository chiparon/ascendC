# MatmulLeakyRelu v2 NPU 复现实验包（2026-02-17）

## 1. 目标
- 基于 `v2` 路径一次性执行 S1/S2/S3 A/B 对比和 S4 回归点。
- 固定平台为 `Ascend910B3`，默认口径与 2/17 上下文一致。

## 2. 路径
- `Optimized/v2_algorithm/MatmulLeakyReluInvocationAsync`

## 3. 一键运行
```bash
cd /home/viparon/share/VMShare/AIal/envtrial/samples/operator/ascendc/0_introduction/13_matmulleakyrelu_kernellaunch/Optimized/v2_algorithm/MatmulLeakyReluInvocationAsync

# 默认: npu + Ascend910B3 + build once + S3(5) S1/S2/S4(3)
bash scripts/run_ab_suite.sh
```

## 4. 常用覆盖参数
```bash
# 只跑 run（跳过 build）
DO_BUILD=0 bash scripts/run_ab_suite.sh

# 改 run 模式 / SOC
RUN_MODE=npu SOC_VERSION=Ascend910B3 bash scripts/run_ab_suite.sh

# 调整自适应核心上限
MATMUL_ADAPTIVE_MAX_CORE=4 bash scripts/run_ab_suite.sh

# 调整重复次数
S3_REPEAT=5 S1_REPEAT=3 S2_REPEAT=3 S4_REPEAT=3 bash scripts/run_ab_suite.sh
```

## 5. 输出
- 日志目录：`ab_logs_YYYYMMDD_HHMMSS/`
- 汇总表：
  - `summary.csv`
  - `summary.md`
- 每个 case 一个日志文件，字段包含：
  - `AVG_MS/P50_MS/P90_MS`
  - `error ratio`
  - `test pass/fail`
